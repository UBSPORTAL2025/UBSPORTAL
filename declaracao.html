<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Declaração de Comparecimento - Caieiras</title>
    <style>
    @media print {
        @page { size: A4; margin: 0; }
        body { margin: 0; }
        .no-print { display: none !important; }
        .document { border: none; padding: 1cm; box-shadow: none; height: 29.7cm; width: 21cm; }
        .footer { page-break-inside: avoid; position: absolute; bottom: 1cm; width: calc(100% - 2cm); }
        .professional-selector select { display: none; }
        #profissional-print { display: block; margin-top: 5px; font-size: 16px; text-align: center; }
    }
    body { font-family: 'Segoe UI', Tahoma, sans-serif; line-height: 1.5; color: #333; max-width: 21cm; margin: 0 auto; padding: 0; background: #f2f4f8; }
    .document { border: 1px solid #ccc; padding: 1cm; background: #fff; box-shadow: 0 4px 10px rgba(0,0,0,0.05); min-height: 29.7cm; width: 21cm; box-sizing: border-box; margin: auto; border-radius: 8px; }
    .header { display: flex; justify-content: space-between; align-items: center; background: #e8f0fe; padding: 10px; border-radius: 5px; margin-bottom: 15px; }
    .header img { max-height: 100px; }
    .unidade-container { text-align: center; margin-bottom: 20px; }
    .unidade { font-size: 16px; font-weight: bold; color: #194275; }
    .unidade p { margin: 0; }
    .title { font-size: 28px; font-weight: bold; color: #194275; text-align: center; margin: 25px 0; }
    .content { font-size: 16px; text-align: justify; margin-bottom: 25px; }
    .info-paragraph { margin-bottom: 18px; text-align: justify; line-height: 1.6; }
    .label { font-weight: bold; color: #194275; margin-right: 5px; font-size: 18px; }
    .value { font-size: 18px; border-bottom: 1px dotted #aaa; padding: 0 5px; min-width: 120px; display: inline-block; border-radius: 4px; }
    .value:focus { background: #eaf2fb; outline: none; border-bottom-style: solid; }
    .service-types { background: #f8f9fa; padding: 15px; border-radius: 5px; text-align: center; margin: 25px 0; box-shadow: inset 0 2px 4px rgba(0,0,0,0.03); }
    .service-types-title { font-weight: bold; color: #194275; font-size: 18px; margin-bottom: 12px; }
    .checkbox-group { display: flex; justify-content: center; flex-wrap: wrap; gap: 15px; }
    .checkbox-item { display: flex; align-items: center; }
    .checkbox-item input { transform: scale(1.4); margin-right: 6px; cursor: pointer; }
    .checkbox-item label { font-size: 16px; cursor: pointer; }
    #justificativa-container { display: none; margin-top: 10px; }
    #justificativa { width: 100%; min-height: 60px; border: 1px solid #ccc; border-radius: 4px; padding: 8px; font-size: 16px; }
    .signature { margin-top: 70px; border-top: 1px solid #333; padding-top: 5px; width: 50%; margin: 0 auto; text-align: center; font-size: 16px; }
    .professional-selector { text-align: center; margin-top: 10px; }
    select { padding: 6px; border: 1px solid #ccc; background: #fff; font-size: 16px; border-radius: 4px; cursor: pointer; }
    .watermark { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(-30deg); font-size: 5cm; color: #194275; opacity: 0.08; pointer-events: none; z-index: 0; }
    .footer { text-align: center; font-size: 14px; border-top: 1px solid #ccc; padding-top: 5px; color: #194275; margin-top: 20px; position: relative; }
    .footer img { max-height: 50px; margin-top: 5px; }
    .no-print { background: #f0f8ff; padding: 15px; border-left: 5px solid #194275; border-radius: 5px; text-align: center; margin-top: 20px; }
    .button-group { display: flex; justify-content: center; margin-top: 15px; gap: 10px; }
    .print-button, .reset-button { padding: 12px 24px; border-radius: 5px; font-size: 16px; font-weight: bold; cursor: pointer; border: none; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
    .print-button { background: #194275; color: #fff; }
    .print-button:hover { background: #0e2a4f; }
    .reset-button { background: #6c757d; color: #fff; }
    .reset-button:hover { background: #5a6268; }
    .message { margin-top: 15px; padding: 10px; border-radius: 5px; text-align: center; font-weight: bold; display: none; }
    .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
    .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
    </style>
    <link rel="icon" href="cristo.png" type="image/png">
</head>

<body>
    <div class="document">
        <div class="header">
            <img src="SUS1.png" alt="Logo SUS">
            <img src="bb.png" alt="Logo UBS">
        </div>
        <div class="unidade-container">
            <div class="unidade">UBS PORTAL DAS LARANJEIRAS ANTÔNIO DE SOUZA SANTOS<p>CNES: 4737423</p></div>
        </div>
        <div class="title">DECLARAÇÃO DE COMPARECIMENTO</div>
        <div class="content">Certificamos, para os devidos fins e conforme solicitado, que a pessoa abaixo identificada compareceu a esta Unidade de Saúde na data e horário previamente agendados, tendo recebido o atendimento necessário, seja como acompanhante, ou por meio de consulta ou exame, conforme a situação determinada pelo profissional responsável.</div>

        <div class="info-paragraph"><span class="label">Nome:</span><span class="value" id="nome" contenteditable></span></div>
        <div class="info-paragraph"><span class="label">CPF:</span><span class="value" id="cpf" contenteditable data-original-value></span></div>
        <div class="info-paragraph"><span class="label">Data:</span><span class="value" id="data" contenteditable></span></div>
        <div class="info-paragraph"><span class="label">Horário:</span><span class="value" id="horario" contenteditable>das 00:00 às 00:00 (período da manhã)</span></div>

        <div class="service-types">
            <div class="service-types-title">Tipo de Atendimento:</div>
            <div class="checkbox-group">
                <div class="checkbox-item"><input type="checkbox" id="consulta"><label for="consulta">Consulta</label></div>
                <div class="checkbox-item"><input type="checkbox" id="exame"><label for="exame">Exame</label></div>
                <div class="checkbox-item"><input type="checkbox" id="acompanhante"><label for="acompanhante">Acompanhante</label></div>
                <div class="checkbox-item"><input type="checkbox" id="retorno"><label for="retorno">Retorno</label></div>
                <div class="checkbox-item"><input type="checkbox" id="outro"><label for="outro">Outro</label></div>
            </div>
            <div id="justificativa-container"><label for="justificativa" class="label">Justificativa:</label><textarea id="justificativa" placeholder="Descreva a justificativa..."></textarea></div>
        </div>

        <div class="signature">
            Assinatura do Profissional
            <div class="professional-selector">
                <select id="profissional">
                    <option value="Auxiliar Administrativo">Auxiliar Administrativo</option>
                    <option value="Gerente">Gerente</option>
                    <option value="Recepcionista">Recepcionista</option>
                    <option value="Médico">Médico</option>
                    <option value="Dentista">Dentista</option>
                    <option value="Psicólogo">Psicólogo</option>
                    <option value="Enfermeiro">Enfermeiro</option>
                    <option value="Técnico de Enfermagem">Técnico de Enfermagem</option>
                    <option value="Agente de Saúde">Agente de Saúde</option>
                    <option value="Assistente Social">Assistente Social</option>
                    <option value="Nutricionista">Nutricionista</option>
                    <option value="Fisioterapeuta">Fisioterapeuta</option>
                    <option value="Outro">Outro</option>
                </select>
            </div>
        </div>

        <footer class="footer">
            <p>Caieiras, <span id="data-atual"></span></p>
            <p>Horário de emissão: <span id="hora-atual"></span></p>
            <img src="123.png" alt="Selo de Validação">
            <p>www.caieiras.sp.gov.br | <span>@prefeituradecaieiras</span></p>
        </footer>

        <div class="watermark">UBS PORTAL</div>

        <div class="no-print">
            <div id="message" class="message"></div>
            <div class="button-group">
                <button type="button" class="reset-button" onclick="resetForm()">Limpar Formulário</button>
                <button type="button" class="print-button" onclick="generateAndPrint()">Imprimir Declaração</button>
            </div>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const outro = document.getElementById('outro');
        const justContainer = document.getElementById('justificativa-container');
        outro.addEventListener('change', () => {
            justContainer.style.display = outro.checked ? 'block' : 'none';
        });
        updateDateTime();
        setInterval(updateDateTime,60000);
    });

    function updateDateTime() {
        const now = new Date();
        const d = String(now.getDate()).padStart(2,'0');
        const m = String(now.getMonth()+1).padStart(2,'0');
        const y = now.getFullYear();
        const h = String(now.getHours()).padStart(2,'0');
        const min = String(now.getMinutes()).padStart(2,'0');
        document.getElementById('data-atual').textContent = `${d}/${m}/${y}`;
        document.getElementById('hora-atual').textContent = `${h}:${min}`;
        const dataField = document.getElementById('data');
        if(!dataField.textContent.trim()) dataField.textContent = `${d}/${m}/${y}`;
    }
    function formatCPF(cpf) {
        cpf = cpf.replace(/\D/g,'').slice(0,11);
        return cpf.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,'$1.$2.$3-$4');
    }
    function capitalizeName(str) {
        return str.toLowerCase().split(' ').map(w=>w.charAt(0).toUpperCase()+w.slice(1)).join(' ');
    }
    function showMessage(text, success) {
        const msg = document.getElementById('message');
        msg.textContent = text;
        msg.className = `message ${success? 'success':'error'}`;
        msg.style.display = 'block';
        setTimeout(()=>msg.style.display='none',5000);
    }
    function generateAndPrint() {
        const nome = document.getElementById('nome');
        if(!nome.textContent.trim()) { showMessage('Preencha o nome antes de imprimir.', false); return; }
        nome.textContent = capitalizeName(nome.textContent.trim());
        const cpf = document.getElementById('cpf'); cpf.textContent = formatCPF(cpf.textContent.trim());
        const select = document.getElementById('profissional');
        const span = document.createElement('span'); span.id='profissional-print'; span.textContent=select.value;
        select.parentNode.replaceChild(span, select);
        updateDateTime(); window.print(); resetForm();
    }
    function resetForm() {
        document.getElementById('nome').textContent='';
        const cpf = document.getElementById('cpf'); cpf.textContent=''; cpf.dataset.originalValue='';
        const today = new Date();
        const d = String(today.getDate()).padStart(2,'0'); const m = String(today.getMonth()+1).padStart(2,'0'); const y = today.getFullYear();
        document.getElementById('data').textContent=`${d}/${m}/${y}`;
        document.getElementById('horario').textContent='das 00:00 às 00:00 (período da manhã)';
        document.querySelectorAll('input[type="checkbox"]').forEach(c=>c.checked=false);
        document.getElementById('justificativa-container').style.display='none';
        const wrapper = document.querySelector('.professional-selector');
        wrapper.innerHTML = `<select id="profissional">...options...</select>`;
        showMessage('Formulário reiniciado com sucesso!', true);
    }
    </script>
</body>
</html>
